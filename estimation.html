<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estimation Immobili√®re - Estimation Gironde</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="container">
            <div id="logo">
                <h1>Estimation Gironde</h1>
                <p>Votre expert immobilier en Gironde</p>
            </div>
            <nav>
                <ul>
                    <li><a href="index.html">Accueil</a></li>
                    <li><a href="estimation.html">Estimation</a></li>
                    <li><a href="a-propos.html">√Ä propos</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <section id="estimation-form">
            <div class="container">
                <h2>Estimation pr√©cise de votre bien</h2>
                <p>Remplissez ce formulaire pour obtenir une estimation d√©taill√©e</p>
                
                <form id="estimationForm">
                    <!-- Type de bien -->
                    <div class="form-group">
                        <label for="property-type">Type de bien *</label>
                        <select id="property-type" name="property-type" required>
                            <option value="">S√©lectionnez...</option>
                            <option value="maison">Maison</option>
                            <option value="appartement">Appartement</option>
                            <option value="terrain">Terrain</option>
                        </select>
                    </div>

                    <!-- Section terrain (uniquement pour maisons) -->
                    <div id="terrain-section" style="display: none;">
                        <div class="form-group">
                            <label for="terrain-inclus">Le terrain est-il inclus dans la vente ?</label>
                            <select id="terrain-inclus" name="terrain-inclus">
                                <option value="non">Non, appartement en copropri√©t√©</option>
                                <option value="oui">Oui, terrain inclus</option>
                            </select>
                        </div>
                        <div class="form-group" id="surface-terrain-group" style="display: none;">
                            <label for="surface-terrain">Surface du terrain (m¬≤)</label>
                            <input type="number" id="surface-terrain" name="surface-terrain" min="0" placeholder="Ex: 500">
                            <small>La surface du terrain influence fortement le prix des maisons</small>
                        </div>
                    </div>

                    <!-- Localisation -->
                    <div class="form-group">
                        <label for="city">Localisation *</label>
                        <input type="text" id="city" name="city" required placeholder="Ex: Bordeaux, Langon, Andernos...">
                        <small>Indiquez la commune. Pr√©cisez le quartier pour Bordeaux</small>
                    </div>

                    <!-- Caract√©ristiques principales -->
                    <div class="form-grid-compact">
                        <div class="form-group">
                            <label for="surface">Surface habitable (m¬≤) *</label>
                            <input type="number" id="surface" name="surface" required min="1" placeholder="Ex: 80">
                        </div>
                        
                        <div class="form-group">
                            <label for="rooms">Nombre de pi√®ces *</label>
                            <input type="number" id="rooms" name="rooms" required min="1" placeholder="Ex: 3">
                        </div>
                    </div>

                    <div class="form-grid-compact">
                        <div class="form-group">
                            <label for="bedrooms">Nombre de chambres</label>
                            <input type="number" id="bedrooms" name="bedrooms" min="0" placeholder="Ex: 2">
                        </div>
                        
                        <div class="form-group">
                            <label for="year">Ann√©e construction</label>
                            <input type="number" id="year" name="year" min="1800" max="2024" placeholder="Ex: 1990">
                        </div>
                    </div>

                    <!-- √âtat et √©tage -->
                    <div class="form-grid-compact">
                        <div class="form-group">
                            <label for="condition">√âtat du bien *</label>
                            <select id="condition" name="condition" required>
                                <option value="">S√©lectionnez...</option>
                                <option value="excellent">Excellent - Neuf ou r√©nov√©</option>
                                <option value="bon">Bon - Bien entretenu</option>
                                <option value="moyen">Moyen - Petits travaux</option>
                                <option value="renovation">√Ä r√©nover - Gros travaux</option>
                            </select>
                        </div>
                        
                        <div class="form-group" id="etage-group">
                            <label for="etage">√âtage</label>
                            <select id="etage" name="etage">
                                <option value="rez-de-chaussee">Rez-de-chauss√©e</option>
                                <option value="intermediaire">√âtage interm√©diaire</option>
                                <option value="dernier">Dernier √©tage</option>
                            </select>
                        </div>
                    </div>

                    <!-- √âquipements -->
                    <div class="form-group">
                        <label>√âquipements suppl√©mentaires</label>
                        <div class="checkbox-group-compact">
                            <label class="checkbox checkbox-compact">
                                <input type="checkbox" id="balcon" name="balcon">
                                Balcon/Terrasse
                            </label>
                            <label class="checkbox checkbox-compact">
                                <input type="checkbox" id="parking" name="parking">
                                Parking
                            </label>
                            <label class="checkbox checkbox-compact">
                                <input type="checkbox" id="cave" name="cave">
                                Cave
                            </label>
                            <label class="checkbox checkbox-compact">
                                <input type="checkbox" id="jardin" name="jardin">
                                Jardin
                            </label>
                        </div>
                    </div>

                    <!-- Contact -->
                    <div class="form-grid-compact">
                        <div class="form-group">
                            <label for="name">Votre nom *</label>
                            <input type="text" id="name" name="name" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="email">Email *</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="phone">T√©l√©phone</label>
                        <input type="tel" id="phone" name="phone">
                    </div>

                    <button type="submit" class="btn" style="width: 100%; margin-top: 20px;">
                        Obtenir mon estimation pr√©cise
                    </button>
                </form>
            </div>
        </section>

        <!-- R√©sultats -->
        <section id="result-section" style="display: none;">
            <div class="container">
                <div class="estimation-result">
                    <h2>üéØ Votre Estimation Personnalis√©e</h2>
                    
                    <div class="result-grid">
                        <div class="result-main">
                            <div class="prix-final">000 000 ‚Ç¨</div>
                            <div class="prix-m2">0 000 ‚Ç¨/m¬≤</div>
                            <div class="confidence">Estimation fiable</div>
                        </div>
                        
                        <div class="result-details">
                            <h3>D√©tail de l'estimation</h3>
                            <div class="details-list">
                                <!-- Les d√©tails appara√Ætront ici -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="result-actions">
                        <button class="btn btn-secondary" onclick="recalculerEstimation()">Modifier les crit√®res</button>
                        <button class="btn" onclick="envoyerEstimation()">Recevoir par email</button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2024 Estimation Immobili√®re Gironde - Tous droits r√©serv√©s</p>
            <p>Contact: contact@estimation-gironde.fr | Tel: 05 56 XX XX XX</p>
        </div>
    </footer>

    <script>
        // Prix au m¬≤ R√âALISTES pour toute la Gironde
        const prixParVille = {
            // Bordeaux et proche banlieue
            'bordeaux': { 'centre': 4800, 'chartrons': 4500, 'saint-michel': 3800, 'bastide': 3500, 'default': 4200 },
            'merignac': 3200,
            'pessac': 3000,
            'talence': 3500,
            'gradignan': 3200,
            'cenon': 2800,
            'lormont': 2600,
            'floirac': 2500,
            'bruges': 2900,
            'le bouscat': 3800,
            'villenave': 2800,
            
            // Bassin d'Arcachon
            'arcachon': 5500,
            'la teste': 4500,
            'gujan': 3800,
            'andernos': 3500,
            'lanton': 3200,
            'audenge': 3000,
            'biganos': 2800,
            
            // Libournais
            'libourne': 2200,
            'saint-emilion': 3500,
            'pomerol': 3800,
            'fronsac': 2000,
            'castillon': 1800,
            
            // Sud Gironde
            'langon': 1800,
            'saint-macaire': 1700,
            'la reole': 1600,
            'aillas': 1500,
            'sauveterre': 1550,
            
            // Nord Gironde
            'blaye': 1600,
            'bourg': 1500,
            'saint-ciers': 1450,
            'lansac': 1550,
            
            // Entre-deux-mers
            'creon': 2000,
            'sauvignac': 1900,
            'rontignon': 1800,
            
            // Prix par d√©faut pour autres communes
            'default': 2000
        };

        // Gestion de l'affichage conditionnel
        document.getElementById('property-type').addEventListener('change', function() {
            const type = this.value;
            const terrainSection = document.getElementById('terrain-section');
            const etageGroup = document.getElementById('etage-group');
            
            // Afficher/masquer section terrain pour maisons
            if (type === 'maison') {
                terrainSection.style.display = 'block';
                etageGroup.style.display = 'none';
            } else {
                terrainSection.style.display = 'none';
                etageGroup.style.display = 'block';
            }
            
            // Recalculer l'estimation
            calculerEstimationComplete();
        });

        // Gestion du terrain inclus
        document.getElementById('terrain-inclus').addEventListener('change', function() {
            const surfaceTerrainGroup = document.getElementById('surface-terrain-group');
            surfaceTerrainGroup.style.display = this.value === 'oui' ? 'block' : 'none';
            calculerEstimationComplete();
        });

        function calculerEstimationComplete() {
            // R√©cup√©ration des valeurs
            const type = document.getElementById('property-type').value;
            const ville = document.getElementById('city').value.toLowerCase();
            const surface = parseInt(document.getElementById('surface').value) || 0;
            const pieces = parseInt(document.getElementById('rooms').value) || 0;
            const chambres = parseInt(document.getElementById('bedrooms').value) || 0;
            const etat = document.getElementById('condition').value;
            const annee = parseInt(document.getElementById('year').value) || 0;
            const etage = document.getElementById('etage').value;
            
            // √âquipements
            const balcon = document.getElementById('balcon').checked;
            const parking = document.getElementById('parking').checked;
            const cave = document.getElementById('cave').checked;
            const jardin = document.getElementById('jardin').checked;
            
            // Terrain (uniquement pour maisons)
            const terrainInclus = document.getElementById('terrain-inclus').value;
            const surfaceTerrain = parseInt(document.getElementById('surface-terrain').value) || 0;

            if (ville && surface > 0 && pieces > 0) {
                // Trouver le prix au m¬≤
                let prixM2Base = prixParVille.default;
                for (const [villeKey, prix] of Object.entries(prixParVille)) {
                    if (ville.includes(villeKey)) {
                        if (typeof prix === 'object') {
                            // Bordeaux avec quartiers
                            prixM2Base = prix.default;
                            for (const [quartier, prixQuartier] of Object.entries(prix)) {
                                if (ville.includes(quartier)) {
                                    prixM2Base = prixQuartier;
                                    break;
                                }
                            }
                        } else {
                            // Autres villes
                            prixM2Base = prix;
                        }
                        break;
                    }
                }

                let prixBase = surface * prixM2Base;
                let ajustements = [];

                // Ajustement TYPE DE BIEN
                if (type === 'maison') {
                    const ajout = prixBase * 0.10;
                    prixBase += ajout;
                    ajustements.push({ label: "Maison (vs appartement)", valeur: ajout });
                    
                    // TERRAIN pour maisons
                    if (terrainInclus === 'oui' && surfaceTerrain > 0) {
                        const prixTerrain = surfaceTerrain * 50; // 50‚Ç¨/m¬≤ pour le terrain
                        prixBase += prixTerrain;
                        ajustements.push({ label: `Terrain ${surfaceTerrain}m¬≤`, valeur: prixTerrain });
                    }
                } else if (type === 'terrain') {
                    prixBase = surface * 80; // Prix terrain nu
                    ajustements.push({ label: "Terrain nu", valeur: 0 });
                }

                // Ajustement √âTAT
                if (etat === 'excellent') {
                    const ajout = prixBase * 0.15;
                    prixBase += ajout;
                    ajustements.push({ label: "√âtat excellent", valeur: ajout });
                } else if (etat === 'bon') {
                    const ajout = prixBase * 0.08;
                    prixBase += ajout;
                    ajustements.push({ label: "√âtat bon", valeur: ajout });
                } else if (etat === 'moyen') {
                    const ajout = prixBase * -0.05;
                    prixBase += ajout;
                    ajustements.push({ label: "√âtat moyen", valeur: ajout });
                } else if (etat === 'renovation') {
                    const ajout = prixBase * -0.25;
                    prixBase += ajout;
                    ajustements.push({ label: "√Ä r√©nover", valeur: ajout });
                }

                // Ajustement ANN√âE
                if (annee > 0) {
                    const age = 2024 - annee;
                    if (age < 10) {
                        const ajout = prixBase * 0.05;
                        prixBase += ajout;
                        ajustements.push({ label: "Construction r√©cente", valeur: ajout });
                    } else if (age > 50) {
                        const ajout = prixBase * -0.03;
                        prixBase += ajout;
                        ajustements.push({ label: "Construction ancienne", valeur: ajout });
                    }
                }

                // Ajustement PI√àCES
                if (pieces >= 5) {
                    const ajout = prixBase * 0.08;
                    prixBase += ajout;
                    ajustements.push({ label: "Grande surface", valeur: ajout });
                }

                // Ajustement √âQUIPEMENTS
                if (balcon) {
                    const ajout = 5000;
                    prixBase += ajout;
                    ajustements.push({ label: "Balcon/Terrasse", valeur: ajout });
                }
                if (parking) {
                    const ajout = 10000;
                    prixBase += ajout;
                    ajustements.push({ label: "Parking", valeur: ajout });
                }
                if (cave) {
                    const ajout = 3000;
                    prixBase += ajout;
                    ajustements.push({ label: "Cave", valeur: ajout });
                }
                if (jardin && type !== 'maison') {
                    const ajout = 8000;
                    prixBase += ajout;
                    ajustements.push({ label: "Jardin", valeur: ajout });
                }

                // Calcul final
                const estimationFinale = Math.round(prixBase);
                const prixM2Final = Math.round(estimationFinale / surface);

                afficherResultat(estimationFinale, prixM2Final, ajustements, prixM2Base);
            }
        }

        function afficherResultat(estimation, prixM2, ajustements, prixM2Base) {
            document.getElementById('result-section').style.display = 'block';
            
            const prixElement = document.querySelector('.prix-final');
            prixElement.textContent = estimation.toLocaleString('fr-FR') + ' ‚Ç¨';
            
            document.querySelector('.prix-m2').textContent = prixM2.toLocaleString('fr-FR') + ' ‚Ç¨/m¬≤';
            
            const detailsList = document.querySelector('.details-list');
            let detailsHTML = `
                <div class="detail-item">
                    <span class="detail-label">Prix de base (${prixM2Base}‚Ç¨/m¬≤):</span>
                    <span class="detail-value">${Math.round(prixM2Base * parseInt(document.getElementById('surface').value)).toLocaleString('fr-FR')} ‚Ç¨</span>
                </div>
            `;
            
            ajustements.forEach(ajust => {
                const type = ajust.valeur > 0 ? 'positive' : 'negative';
                const signe = ajust.valeur > 0 ? '+' : '';
                detailsHTML += `
                    <div class="detail-item ${type}">
                        <span class="detail-label">${ajust.label}:</span>
                        <span class="detail-value">${signe}${Math.round(ajust.valeur).toLocaleString('fr-FR')} ‚Ç¨</span>
                    </div>
                `;
            });
            
            detailsList.innerHTML = detailsHTML;
        }

        function recalculerEstimation() {
            document.getElementById('result-section').style.display = 'none';
        }

        function envoyerEstimation() {
            const prix = document.querySelector('.prix-final').textContent;
            alert(`Estimation ${prix} envoy√©e √† votre email ! üìß`);
        }

        // √âcouteurs d'√©v√©nements
        const champs = ['city', 'surface', 'rooms', 'bedrooms', 'property-type', 'condition', 'year', 'etage', 'balcon', 'parking', 'cave', 'jardin', 'terrain-inclus', 'surface-terrain'];
        champs.forEach(champ => {
            const element = document.getElementById(champ);
            if (element) {
                if (element.type === 'checkbox') {
                    element.addEventListener('change', calculerEstimationComplete);
                } else {
                    element.addEventListener('input', calculerEstimationComplete);
                }
            }
        });

        document.getElementById('estimationForm').addEventListener('submit', function(e) {
            e.preventDefault();
            calculerEstimationComplete();
        });
    </script>
</body>
</html>